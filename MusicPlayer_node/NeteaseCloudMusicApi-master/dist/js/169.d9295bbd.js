"use strict";(self["webpackChunkmusic_player"]=self["webpackChunkmusic_player"]||[]).push([[169],{269:function(e,t,n){n.d(t,{b:function(){return r},t:function(){return o}});var l=n(991);function r(e){let t=[],n=[];for(let l=0;l<e.length;l++)n.push(new Promise(((n,r)=>{a(e[l],t,n)})));return Promise.all(n).then((()=>(t.sort(((e,t)=>e.tag.charCodeAt()-t.tag.charCodeAt())),t.unshift(t.pop()),t)))}function o(e){return(0,l.U)("/artists",{id:e.id})}function a(e,t,n){"热"===e?(0,l.U)("/top/artists",{limit:30}).then((l=>{t.push({tag:e,nameArr:l.artists}),n()})).catch((e=>{throw e})):(0,l.U)("/artist/list",{initial:e,type:-1,area:-1}).then((l=>{t.push({tag:e,nameArr:l.artists}),n()})).catch((e=>{throw e}))}},4169:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var l=n(3396),r=n(4870),o=n(9242),a=n(269),c=n(678),i=n(7139),s=n(4317);function u(e){const t=(0,r.iH)(0),n=(0,r.iH)(null),o=(0,r.iH)([]),a=(0,r.iH)(0),c=(0,r.iH)(0),i=e=>{t.value=-e.y},s=(0,l.computed)((()=>t.value<0?0:e.singerList[a.value]?e.singerList[a.value].tag:"")),u=(0,l.computed)((()=>{let e=0;return c.value>0&&c.value<30&&(e=c.value-30),{transform:`translate(0, ${e}px)`}}));function d(){const e=n.value.children,t=o.value;let l=0;t.length=0,t.push(l);for(let n=0;n<e.length;n++)l+=e[n].clientHeight,t.push(l)}return(0,l.watch)((()=>e.singerList),(async()=>{await(0,l.nextTick)(),d()})),(0,l.watch)(t,(e=>{const t=o.value;for(let n=0;n<t.length;n++){const l=t[n],r=t[n+1];e>=l&&e<r&&(a.value=n,c.value=r-e)}})),(0,l.onMounted)((()=>{d()})),{onScroll:i,groupRef:n,fixedTitle:s,fixedStyle:u,currentIndex:a}}function d(e){const t=(0,r.iH)(null),n={};function l(e){const t=e.target.dataset.index/1;n.y1=e.touches[0].pageY,n.anchorIndex=t,a(t)}function o(e){n.y2=e.touches[0].pageY;const t=Math.floor((n.y2-n.y1)/18),l=n.anchorIndex+t;a(l)}function a(n){n=Math.max(0,Math.min(n,e.value.children.length-1));const l=t.value.scroll,r=e.value.children[n];l.scrollToElement(r)}return{scrollRef:t,onShortcutTouchStart:l,onShortcutTouchMove:o}}const h={class:"title"},p=["onClick"],m={class:"avatar"},v={alt:""},f={class:"name"},g={class:"fixed-title"},S={class:"shortcut"},k=["data-index"];var _={__name:"SingerList",props:["singerList","arrStr"],emits:["select"],setup(e,{emit:t}){const n=e,{onScroll:a,groupRef:c,fixedTitle:_,fixedStyle:w,currentIndex:y}=u(n),{scrollRef:x,onShortcutTouchStart:B,onShortcutTouchMove:E}=d(c);function U(e){t("select",e)}return(t,n)=>{const u=(0,l.resolveDirective)("img-lazy");return(0,l.openBlock)(),(0,l.createBlock)((0,r.SU)(s.Z),{class:"singer-list",onScroll:(0,r.SU)(a),probeType:3,ref_key:"scrollRef",ref:x},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("ul",{class:"view-scroll",ref_key:"groupRef",ref:c},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.singerList,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{class:"group",key:e.tag},[(0,l.createElementVNode)("h2",h,(0,i.zw)(e.tag),1),(0,l.createElementVNode)("ul",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.nameArr,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{class:"item",key:e.id,onClick:t=>U(e)},[(0,l.createElementVNode)("div",m,[(0,l.withDirectives)((0,l.createElementVNode)("img",v,null,512),[[u,e.picUrl]])]),(0,l.createElementVNode)("span",f,(0,i.zw)(e.name),1)],8,p)))),128))])])))),128))],512),(0,l.withDirectives)((0,l.createElementVNode)("div",{class:"fixed",style:(0,i.j5)((0,r.SU)(w))},[(0,l.createElementVNode)("div",g,(0,i.zw)((0,r.SU)(_)),1)],4),[[o.F8,(0,r.SU)(_)]]),(0,l.createElementVNode)("div",S,[(0,l.createElementVNode)("ul",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.arrStr,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{class:(0,i.C_)(["item",{current:(0,r.SU)(y)===t}]),key:t,"data-index":t,onTouchstart:n[0]||(n[0]=(0,o.iM)(((...e)=>(0,r.SU)(B)&&(0,r.SU)(B)(...e)),["prevent"])),onTouchmove:n[1]||(n[1]=(0,o.iM)(((...e)=>(0,r.SU)(E)&&(0,r.SU)(E)(...e)),["prevent"]))},(0,i.zw)(e),43,k)))),128))])])])),_:1},8,["onScroll"])}}},w=n(89);const y=(0,w.Z)(_,[["__scopeId","data-v-2529290a"]]);var x=y,B=n(7408);const E={class:"singer"};var U={__name:"Singer",setup(e){const t=(0,c.tv)(),n=(0,r.iH)([]),i=(0,r.iH)({}),s=(0,l.computed)((()=>{let e=["热"];for(let t=65;t<91;t++)e.push(String.fromCharCode(t));return e}));function u(e){i.value={picUrl:e.picUrl,id:e.id,name:e.name},B.Z.setLocal("__singerDetail__",i.value),t.push({path:`/singer/${e.id}`})}return(0,l.onMounted)((async()=>{let e=B.Z.getLocal("__singerList__",[]);if(e.length)n.value=e;else{const e=await(0,a.b)(s.value);n.value=e,B.Z.setLocal("__singerList__",e)}})),(e,t)=>{const a=(0,l.resolveComponent)("router-view"),c=(0,l.resolveDirective)("loading");return(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("div",E,[(0,l.createVNode)((0,r.SU)(x),{singerList:n.value,arrStr:(0,r.SU)(s),onSelect:u},null,8,["singerList","arrStr"]),(0,l.createVNode)(a,null,{default:(0,l.withCtx)((({Component:e})=>[(0,l.createVNode)(o.uT,{name:"slide",appear:""},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(e),{detailObj:i.value},null,8,["detailObj"]))])),_:2},1024)])),_:1})])),[[c,!n.value.length]])}}};const L=(0,w.Z)(U,[["__scopeId","data-v-7b4e3ce2"]]);var C=L}}]);